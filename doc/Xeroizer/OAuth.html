<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta name="Content-Type" content="text/html; charset=utf-8" />
<title>Class: Xeroizer::OAuth</title>
<link rel="stylesheet" href="../css/style.css" type="text/css" media="screen" charset="utf-8" />
<link rel="stylesheet" href="../css/common.css" type="text/css" media="screen" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  relpath = '..';
  if (relpath != '') relpath += '/';
</script>
<script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>
<script type="text/javascript" charset="utf-8" src="../js/app.js"></script>

  </head>
  <body>
    <script type="text/javascript" charset="utf-8">
      if (window.top.frames.main) document.body.className = 'frames';
    </script>
    
    <div id="header">
      <div id="menu">
  
    <a href="../_index.html">Index (O)</a> &raquo; 
    <span class='title'><span class='object_link'><a href="../Xeroizer.html" title="Xeroizer (module)">Xeroizer</a></span></span>
     &raquo; 
    <span class="title">OAuth</span>
  
  
  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  <a id="class_list_link" href="#">Class List</a>
  <a id="method_list_link" href="#">Method List</a>
  <a id ="file_list_link" href="#">File List</a>
</div>

      <div class="clear"></div>
    </div>
    
    <iframe id="search_frame"></iframe>
    
    <div id="content"><h1>Class: Xeroizer::OAuth
  
  
  
</h1>

<dl class="box">
  
    <dt class="r1">Inherits:</dt>
    <dd class="r1">
      <span class="inheritName">Object</span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next">Xeroizer::OAuth</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
      </dd>
    
  
  
    
      <dt class="r2">Extended by:</dt>
      <dd class="r2">Forwardable</dd>
      
    
  
    
  
  
  
    <dt class="r1 last">Defined in:</dt>
    <dd class="r1 last">lib/xeroizer/oauth.rb</dd>
  
</dl>
<div class="clear"></div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    <p>
Shamelessly taken from the XeroGateway library by Tim Connor which is
shamelessly based on the Twitter Gem&#8217;s OAuth implementation by John
Nunemaker Thanks!
</p>
<p>
http://github.com/tlconnor/xero_gateway http://twitter.rubyforge.org/
http://github.com/jnunemaker/twitter/
</p>


  </div>
</div>
<div class="tags">
  
</div><h2>Defined Under Namespace</h2>
<p class="children">
   
    
   
    
      <strong class="classes">Classes:</strong> <span class='object_link'><a href="OAuth/RateLimitExceeded.html" title="Xeroizer::OAuth::RateLimitExceeded (class)">RateLimitExceeded</a></span>, <span class='object_link'><a href="OAuth/TokenExpired.html" title="Xeroizer::OAuth::TokenExpired (class)">TokenExpired</a></span>, <span class='object_link'><a href="OAuth/TokenInvalid.html" title="Xeroizer::OAuth::TokenInvalid (class)">TokenInvalid</a></span>, <span class='object_link'><a href="OAuth/UnknownError.html" title="Xeroizer::OAuth::UnknownError (class)">UnknownError</a></span>
    
  
</p>

  <h2>Constant Summary</h2>
  
    <dl class="constants">
      
        <dt id="XERO_CONSUMER_OPTIONS-constant" class="">XERO_CONSUMER_OPTIONS =
          
        </dt>
        <dd><pre class="code"><span class='lbrace token'>{</span>
  <span class='symbol val'>:site</span>               <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;https://api.xero.com&quot;</span><span class='comma token'>,</span>
  <span class='symbol val'>:request_token_path</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;/oauth/RequestToken&quot;</span><span class='comma token'>,</span>
  <span class='symbol val'>:access_token_path</span>  <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;/oauth/AccessToken&quot;</span><span class='comma token'>,</span>
  <span class='symbol val'>:authorize_path</span>     <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;/oauth/Authorize&quot;</span><span class='comma token'>,</span>
  <span class='symbol val'>:ca_file</span>            <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='File constant id'>File</span><span class='dot token'>.</span><span class='expand_path identifier id'>expand_path</span><span class='lparen token'>(</span><span class='File constant id'>File</span><span class='dot token'>.</span><span class='join identifier id'>join</span><span class='lparen token'>(</span><span class='File constant id'>File</span><span class='dot token'>.</span><span class='dirname identifier id'>dirname</span><span class='lparen token'>(</span><span class='__FILE__ __file__ kw'>__FILE__</span><span class='rparen token'>)</span><span class='comma token'>,</span> <span class='string val'>'ca-certificates.crt'</span><span class='rparen token'>)</span><span class='rparen token'>)</span>
<span class='rbrace token'>}</span><span class='dot token'>.</span><span class='freeze identifier id'>freeze</span>
</pre></dd>
      
    </dl>
  


  
  <h2>Instance Attribute Summary <small>(<a href="#" class="summary_toggle">collapse</a>)</small></h2>
  <ul class="summary">
    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#authorization_expires_at-instance_method" title="#authorization_expires_at (instance method)">- (Object) <strong>authorization_expires_at</strong> </a>
    

    
  </span>
  
  
    <span class="note title readonly">readonly</span>
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#consumer_options-instance_method" title="#consumer_options (instance method)">- (Object) <strong>consumer_options</strong> </a>
    

    
  </span>
  
  
    <span class="note title readonly">readonly</span>
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#csecret-instance_method" title="#csecret (instance method)">- (Object) <strong>csecret</strong> </a>
    

    
  </span>
  
  
    <span class="note title readonly">readonly</span>
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#ctoken-instance_method" title="#ctoken (instance method)">- (Object) <strong>ctoken</strong> </a>
    

    
  </span>
  
  
    <span class="note title readonly">readonly</span>
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#expires_at-instance_method" title="#expires_at (instance method)">- (Object) <strong>expires_at</strong> </a>
    

    
  </span>
  
  
    <span class="note title readonly">readonly</span>
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#session_handle-instance_method" title="#session_handle (instance method)">- (Object) <strong>session_handle</strong> </a>
    

    
  </span>
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

    
  </ul>


  
    <h2>
      Instance Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#access_token-instance_method" title="#access_token (instance method)">- (Object) <strong>access_token</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
AccessToken created from authorize_from_access method.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#authorize_from_access-instance_method" title="#authorize_from_access (instance method)">- (Object) <strong>authorize_from_access</strong>(atoken, asecret) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Used for PRIVATE applications where the AccessToken uses the token/secret
from Xero which would normally be used in the request.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#authorize_from_request-instance_method" title="#authorize_from_request (instance method)">- (Object) <strong>authorize_from_request</strong>(rtoken, rsecret, params = {}) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Create an AccessToken from a PUBLIC/PARTNER authorisation.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#consumer-instance_method" title="#consumer (instance method)">- (OAuth::Consumer) <strong>consumer</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
OAuth consumer creator.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#create_consumer-instance_method" title="#create_consumer (instance method)">- (Object) <strong>create_consumer</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Create an OAuth consumer with the SSL client key if specified in
@consumer_options when this instance was created.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">- (OAuth) <strong>initialize</strong>(ctoken, csecret, options = {}) </a>
    

    
  </span>
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
OAuth constructor.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#renew_access_token-instance_method" title="#renew_access_token (instance method)">- (Object) <strong>renew_access_token</strong>(atoken = nil, asecret = nil, session_handle = nil) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Renew an access token from a previously authorised token for a PARTNER
application.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#request_token-instance_method" title="#request_token (instance method)">- (Object) <strong>request_token</strong>(params = {}) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
RequestToken for PUBLIC/PARTNER authorisation (used to redirect to Xero for
authentication).
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#update_attributes_from_token-instance_method" title="#update_attributes_from_token (instance method)">- (Object) <strong>update_attributes_from_token</strong>(access_token) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Update instance variables with those from the AccessToken.
</p>
</div></span>
  
</li>

      
    </ul>
  


  <div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <p class="signature first" id="initialize-instance_method">
  
    - (<tt><span class='object_link'><a href="" title="Xeroizer::OAuth (class)">OAuth</a></span></tt>) <strong>initialize</strong>(ctoken, csecret, options = {}) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
OAuth constructor.
</p>


  </div>
</div>
<div class="tags">
  <h3>Parameters:</h3>
<ul class="param">
  
    <li>
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
        <span class='name'>ctoken</span>
      
      
      
        &mdash;
        <div class='inline'><p>
consumer key/token from application developer (found at http://api.xero.com
for your application).
</p>
</div>
      
    </li>
  
    <li>
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
        <span class='name'>csecret</span>
      
      
      
        &mdash;
        <div class='inline'><p>
consumer secret from application developer (found at http://api.xero.com
for your application).
</p>
</div>
      
    </li>
  
    <li>
      
        <span class='type'>(<tt><span class='object_link'><a href="../Hash.html" title="Hash (class)">Hash</a></span></tt>)</span>
      
      
        <span class='name'>options</span>
      
      
        <em class="default">(defaults to: <tt>{}</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>
a customizable set of options
</p>
</div>
      
    </li>
  
</ul>

  
    
    
    
    
    
    
    <h3>Options Hash (<tt>options</tt>):</h3>
    <ul class="option">
      
        <li>
          <span class="type">(<tt>String</tt>)</span>
          <span class="name">:access_token_path</span>
          <span class="default">
            
          </span>
          &mdash; <div class='inline'><p>
base URL path for getting an AccessToken (default:
&quot;/oauth/AccessToken&quot;)
</p>
</div>
        </tr>
      
        <li>
          <span class="type">(<tt>String</tt>)</span>
          <span class="name">:authorize_path</span>
          <span class="default">
            
          </span>
          &mdash; <div class='inline'><p>
base URL path for authorising (default: &quot;/oauth/Authorize&quot;)
</p>
</div>
        </tr>
      
        <li>
          <span class="type">(<tt>String</tt>)</span>
          <span class="name">:ca_file</span>
          <span class="default">
            
          </span>
          &mdash; <div class='inline'><p>
file containing SSL root certificates (default:
&quot;lib/xeroizer/ca-certificates.crt&quot;)
</p>
</div>
        </tr>
      
        <li>
          <span class="type">(<tt>String</tt>)</span>
          <span class="name">:private_key_file</span>
          <span class="default">
            
          </span>
          &mdash; <div class='inline'><p>
private key used when :signature_method set to RSA-SHA1 (used for
PartnerApplication and PrivateApplication modes)
</p>
</div>
        </tr>
      
        <li>
          <span class="type">(<tt>String</tt>)</span>
          <span class="name">:request_token_path</span>
          <span class="default">
            
          </span>
          &mdash; <div class='inline'><p>
base URL path for getting a RequestToken (default:
&quot;/oauth/RequestToken&quot;)
</p>
</div>
        </tr>
      
        <li>
          <span class="type">(<tt>String</tt>)</span>
          <span class="name">:signature_method</span>
          <span class="default">
            
          </span>
          &mdash; <div class='inline'><p>
method usd to sign requests (default: OAuth library default)
</p>
</div>
        </tr>
      
        <li>
          <span class="type">(<tt>String</tt>)</span>
          <span class="name">:site</span>
          <span class="default">
            
          </span>
          &mdash; <div class='inline'><p>
base site for API requests (default: &quot;https://api.xero.com&quot;)
</p>
</div>
        </tr>
      
        <li>
          <span class="type">(<tt>OpenSSL:X509::Certificate</tt>)</span>
          <span class="name">:ssl_client_cert</span>
          <span class="default">
            
          </span>
          &mdash; <div class='inline'><p>
client-side SSL certificate to use for requests (used for
PartnerApplication mode)
</p>
</div>
        </tr>
      
        <li>
          <span class="type">(<tt>OpenSSL::PKey::RSA</tt>)</span>
          <span class="name">:ssl_client_key</span>
          <span class="default">
            
          </span>
          &mdash; <div class='inline'><p>
client-side SSL private key to use for requests (used for
PartnerApplication mode)
</p>
</div>
        </tr>
      
    </ul>
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


55
56
57
58</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/xeroizer/oauth.rb', line 55</span>

<span class='def def kw'>def</span> <span class='initialize identifier id'>initialize</span><span class='lparen token'>(</span><span class='ctoken identifier id'>ctoken</span><span class='comma token'>,</span> <span class='csecret identifier id'>csecret</span><span class='comma token'>,</span> <span class='options identifier id'>options</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='rparen token'>)</span>
  <span class='@ctoken ivar id'>@ctoken</span><span class='comma token'>,</span> <span class='@csecret ivar id'>@csecret</span> <span class='assign token'>=</span> <span class='ctoken identifier id'>ctoken</span><span class='comma token'>,</span> <span class='csecret identifier id'>csecret</span>
  <span class='@consumer_options ivar id'>@consumer_options</span> <span class='assign token'>=</span> <span class='XERO_CONSUMER_OPTIONS constant id'>XERO_CONSUMER_OPTIONS</span><span class='dot token'>.</span><span class='merge identifier id'>merge</span><span class='lparen token'>(</span><span class='options identifier id'>options</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
  
</div>

  <div id="instance_attr_details" class="attr_details">
    <h2>Instance Attribute Details</h2>
    
      
      <span id=""></span>
      <span id="authorization_expires_at-instance_method"></span>
      <div class="method_details first">
  <p class="signature first" id="authorization_expires_at-instance_method">
  
    - (<tt>Object</tt>) <strong>authorization_expires_at</strong>  <span class="extras">(readonly)</span>
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


36
37
38</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/xeroizer/oauth.rb', line 36</span>

<span class='def def kw'>def</span> <span class='authorization_expires_at identifier id'>authorization_expires_at</span>
  <span class='@authorization_expires_at ivar id'>@authorization_expires_at</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <span id="consumer_options-instance_method"></span>
      <div class="method_details ">
  <p class="signature " id="consumer_options-instance_method">
  
    - (<tt>Object</tt>) <strong>consumer_options</strong>  <span class="extras">(readonly)</span>
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


36
37
38</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/xeroizer/oauth.rb', line 36</span>

<span class='def def kw'>def</span> <span class='consumer_options identifier id'>consumer_options</span>
  <span class='@consumer_options ivar id'>@consumer_options</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <span id="csecret-instance_method"></span>
      <div class="method_details ">
  <p class="signature " id="csecret-instance_method">
  
    - (<tt>Object</tt>) <strong>csecret</strong>  <span class="extras">(readonly)</span>
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


36
37
38</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/xeroizer/oauth.rb', line 36</span>

<span class='def def kw'>def</span> <span class='csecret identifier id'>csecret</span>
  <span class='@csecret ivar id'>@csecret</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <span id="ctoken-instance_method"></span>
      <div class="method_details ">
  <p class="signature " id="ctoken-instance_method">
  
    - (<tt>Object</tt>) <strong>ctoken</strong>  <span class="extras">(readonly)</span>
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


36
37
38</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/xeroizer/oauth.rb', line 36</span>

<span class='def def kw'>def</span> <span class='ctoken identifier id'>ctoken</span>
  <span class='@ctoken ivar id'>@ctoken</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <span id="expires_at-instance_method"></span>
      <div class="method_details ">
  <p class="signature " id="expires_at-instance_method">
  
    - (<tt>Object</tt>) <strong>expires_at</strong>  <span class="extras">(readonly)</span>
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


36
37
38</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/xeroizer/oauth.rb', line 36</span>

<span class='def def kw'>def</span> <span class='expires_at identifier id'>expires_at</span>
  <span class='@expires_at ivar id'>@expires_at</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="session_handle=-instance_method"></span>
      <span id="session_handle-instance_method"></span>
      <div class="method_details ">
  <p class="signature " id="session_handle-instance_method">
  
    - (<tt>Object</tt>) <strong>session_handle</strong> 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


40
41
42</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/xeroizer/oauth.rb', line 40</span>

<span class='def def kw'>def</span> <span class='session_handle identifier id'>session_handle</span>
  <span class='@session_handle ivar id'>@session_handle</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
  </div>


  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>
    
    
      <div class="method_details first">
  <p class="signature first" id="access_token-instance_method">
  
    - (<tt>Object</tt>) <strong>access_token</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
AccessToken created from authorize_from_access method.
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


83
84
85</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/xeroizer/oauth.rb', line 83</span>

<span class='def def kw'>def</span> <span class='access_token identifier id'>access_token</span>
  <span class='@access_token ivar id'>@access_token</span> <span class='opasgn op'>||=</span> <span class='colon3 op'>::</span><span class='OAuth constant id'>OAuth</span><span class='colon2 op'>::</span><span class='AccessToken constant id'>AccessToken</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='consumer identifier id'>consumer</span><span class='comma token'>,</span> <span class='@atoken ivar id'>@atoken</span><span class='comma token'>,</span> <span class='@asecret ivar id'>@asecret</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="authorize_from_access-instance_method">
  
    - (<tt>Object</tt>) <strong>authorize_from_access</strong>(atoken, asecret) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Used for PRIVATE applications where the AccessToken uses the token/secret
from Xero which would normally be used in the request. No request
authorisation necessary.
</p>
<p>
For PUBLIC/PARTNER applications this is used to recreate a client from a
stored AccessToken key/secret.
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


93
94
95</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/xeroizer/oauth.rb', line 93</span>

<span class='def def kw'>def</span> <span class='authorize_from_access identifier id'>authorize_from_access</span><span class='lparen token'>(</span><span class='atoken identifier id'>atoken</span><span class='comma token'>,</span> <span class='asecret identifier id'>asecret</span><span class='rparen token'>)</span>
  <span class='@atoken ivar id'>@atoken</span><span class='comma token'>,</span> <span class='@asecret ivar id'>@asecret</span> <span class='assign token'>=</span> <span class='atoken identifier id'>atoken</span><span class='comma token'>,</span> <span class='asecret identifier id'>asecret</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="authorize_from_request-instance_method">
  
    - (<tt>Object</tt>) <strong>authorize_from_request</strong>(rtoken, rsecret, params = {}) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Create an AccessToken from a PUBLIC/PARTNER authorisation.
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


76
77
78
79
80</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/xeroizer/oauth.rb', line 76</span>

<span class='def def kw'>def</span> <span class='authorize_from_request identifier id'>authorize_from_request</span><span class='lparen token'>(</span><span class='rtoken identifier id'>rtoken</span><span class='comma token'>,</span> <span class='rsecret identifier id'>rsecret</span><span class='comma token'>,</span> <span class='params identifier id'>params</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='rparen token'>)</span>
  <span class='request_token identifier id'>request_token</span> <span class='assign token'>=</span> <span class='colon3 op'>::</span><span class='OAuth constant id'>OAuth</span><span class='colon2 op'>::</span><span class='RequestToken constant id'>RequestToken</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='consumer identifier id'>consumer</span><span class='comma token'>,</span> <span class='rtoken identifier id'>rtoken</span><span class='comma token'>,</span> <span class='rsecret identifier id'>rsecret</span><span class='rparen token'>)</span>
  <span class='access_token identifier id'>access_token</span> <span class='assign token'>=</span> <span class='request_token identifier id'>request_token</span><span class='dot token'>.</span><span class='get_access_token identifier id'>get_access_token</span><span class='lparen token'>(</span><span class='params identifier id'>params</span><span class='rparen token'>)</span>
  <span class='update_attributes_from_token identifier id'>update_attributes_from_token</span><span class='lparen token'>(</span><span class='access_token identifier id'>access_token</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="consumer-instance_method">
  
    - (<tt>OAuth::Consumer</tt>) <strong>consumer</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
OAuth consumer creator.
</p>


  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
        <span class='type'>(<tt>OAuth::Consumer</tt>)</span>
      
      
      
      
        &mdash;
        <div class='inline'><p>
consumer object for GET/POST/PUT methods.
</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


63
64
65</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/xeroizer/oauth.rb', line 63</span>

<span class='def def kw'>def</span> <span class='consumer identifier id'>consumer</span>
  <span class='@consumer ivar id'>@consumer</span> <span class='opasgn op'>||=</span> <span class='create_consumer identifier id'>create_consumer</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="create_consumer-instance_method">
  
    - (<tt>Object</tt>) <strong>create_consumer</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Create an OAuth consumer with the SSL client key if specified in
@consumer_options when this instance was created.
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


112
113
114
115
116
117
118
119</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/xeroizer/oauth.rb', line 112</span>

<span class='def def kw'>def</span> <span class='create_consumer identifier id'>create_consumer</span>
  <span class='consumer identifier id'>consumer</span> <span class='assign token'>=</span> <span class='colon3 op'>::</span><span class='OAuth constant id'>OAuth</span><span class='colon2 op'>::</span><span class='Consumer constant id'>Consumer</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='@ctoken ivar id'>@ctoken</span><span class='comma token'>,</span> <span class='@csecret ivar id'>@csecret</span><span class='comma token'>,</span> <span class='consumer_options identifier id'>consumer_options</span><span class='rparen token'>)</span>
  <span class='if if kw'>if</span> <span class='@consumer_options ivar id'>@consumer_options</span><span class='lbrack token'>[</span><span class='symbol val'>:ssl_client_cert</span><span class='rbrack token'>]</span> <span class='andop op'>&amp;&amp;</span> <span class='@consumer_options ivar id'>@consumer_options</span><span class='lbrack token'>[</span><span class='symbol val'>:ssl_client_key</span><span class='rbrack token'>]</span>
    <span class='consumer identifier id'>consumer</span><span class='dot token'>.</span><span class='http identifier id'>http</span><span class='dot token'>.</span><span class='cert identifier id'>cert</span> <span class='assign token'>=</span> <span class='@consumer_options ivar id'>@consumer_options</span><span class='lbrack token'>[</span><span class='symbol val'>:ssl_client_cert</span><span class='rbrack token'>]</span>
    <span class='consumer identifier id'>consumer</span><span class='dot token'>.</span><span class='http identifier id'>http</span><span class='dot token'>.</span><span class='key identifier id'>key</span> <span class='assign token'>=</span> <span class='@consumer_options ivar id'>@consumer_options</span><span class='lbrack token'>[</span><span class='symbol val'>:ssl_client_key</span><span class='rbrack token'>]</span>
  <span class='end end kw'>end</span>
  <span class='consumer identifier id'>consumer</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="renew_access_token-instance_method">
  
    - (<tt>Object</tt>) <strong>renew_access_token</strong>(atoken = nil, asecret = nil, session_handle = nil) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Renew an access token from a previously authorised token for a PARTNER
application.
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


99
100
101
102
103
104
105
106</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/xeroizer/oauth.rb', line 99</span>

<span class='def def kw'>def</span> <span class='renew_access_token identifier id'>renew_access_token</span><span class='lparen token'>(</span><span class='atoken identifier id'>atoken</span> <span class='assign token'>=</span> <span class='nil nil kw'>nil</span><span class='comma token'>,</span> <span class='asecret identifier id'>asecret</span> <span class='assign token'>=</span> <span class='nil nil kw'>nil</span><span class='comma token'>,</span> <span class='session_handle identifier id'>session_handle</span> <span class='assign token'>=</span> <span class='nil nil kw'>nil</span><span class='rparen token'>)</span>
  <span class='old_token identifier id'>old_token</span> <span class='assign token'>=</span> <span class='colon3 op'>::</span><span class='OAuth constant id'>OAuth</span><span class='colon2 op'>::</span><span class='RequestToken constant id'>RequestToken</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='consumer identifier id'>consumer</span><span class='comma token'>,</span> <span class='atoken identifier id'>atoken</span> <span class='orop op'>||</span> <span class='@atoken ivar id'>@atoken</span><span class='comma token'>,</span> <span class='asecret identifier id'>asecret</span> <span class='orop op'>||</span> <span class='@secret ivar id'>@secret</span><span class='rparen token'>)</span>
  <span class='access_token identifier id'>access_token</span> <span class='assign token'>=</span> <span class='old_token identifier id'>old_token</span><span class='dot token'>.</span><span class='get_access_token identifier id'>get_access_token</span><span class='lparen token'>(</span><span class='lbrace token'>{</span>
    <span class='symbol val'>:oauth_session_handle</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='lparen token'>(</span><span class='session_handle identifier id'>session_handle</span> <span class='orop op'>||</span> <span class='@session_handle ivar id'>@session_handle</span><span class='rparen token'>)</span><span class='comma token'>,</span> 
    <span class='symbol val'>:token</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='old_token identifier id'>old_token</span>
  <span class='rbrace token'>}</span><span class='rparen token'>)</span>
  <span class='update_attributes_from_token identifier id'>update_attributes_from_token</span><span class='lparen token'>(</span><span class='access_token identifier id'>access_token</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="request_token-instance_method">
  
    - (<tt>Object</tt>) <strong>request_token</strong>(params = {}) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
RequestToken for PUBLIC/PARTNER authorisation (used to redirect to Xero for
authentication).
</p>


  </div>
</div>
<div class="tags">
  <h3>Parameters:</h3>
<ul class="param">
  
    <li>
      
        <span class='type'>(<tt><span class='object_link'><a href="../Hash.html" title="Hash (class)">Hash</a></span></tt>)</span>
      
      
        <span class='name'>params</span>
      
      
        <em class="default">(defaults to: <tt>{}</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>
a customizable set of options
</p>
</div>
      
    </li>
  
</ul>

  
    
    
    <h3>Options Hash (<tt>params</tt>):</h3>
    <ul class="option">
      
        <li>
          <span class="type">(<tt>String</tt>)</span>
          <span class="name">:oauth_callback</span>
          <span class="default">
            
          </span>
          &mdash; <div class='inline'><p>
URL to redirect user to when they have authenticated your application with
Xero. If not specified, the user will be shown an authorisation code on the
screen that they need to get into your application.
</p>
</div>
        </tr>
      
    </ul>
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


71
72
73</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/xeroizer/oauth.rb', line 71</span>

<span class='def def kw'>def</span> <span class='request_token identifier id'>request_token</span><span class='lparen token'>(</span><span class='params identifier id'>params</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='rparen token'>)</span>
  <span class='@request_token ivar id'>@request_token</span> <span class='opasgn op'>||=</span> <span class='consumer identifier id'>consumer</span><span class='dot token'>.</span><span class='get_request_token identifier id'>get_request_token</span><span class='lparen token'>(</span><span class='params identifier id'>params</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="update_attributes_from_token-instance_method">
  
    - (<tt>Object</tt>) <strong>update_attributes_from_token</strong>(access_token) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Update instance variables with those from the AccessToken.
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


122
123
124
125
126
127</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/xeroizer/oauth.rb', line 122</span>

<span class='def def kw'>def</span> <span class='update_attributes_from_token identifier id'>update_attributes_from_token</span><span class='lparen token'>(</span><span class='access_token identifier id'>access_token</span><span class='rparen token'>)</span>
  <span class='@expires_at ivar id'>@expires_at</span> <span class='assign token'>=</span> <span class='Time constant id'>Time</span><span class='dot token'>.</span><span class='now identifier id'>now</span> <span class='plus op'>+</span> <span class='access_token identifier id'>access_token</span><span class='dot token'>.</span><span class='params identifier id'>params</span><span class='lbrack token'>[</span><span class='symbol val'>:oauth_expires_in</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='to_i identifier id'>to_i</span>
  <span class='@authorization_expires_at ivar id'>@authorization_expires_at</span> <span class='assign token'>=</span> <span class='Time constant id'>Time</span><span class='dot token'>.</span><span class='now identifier id'>now</span> <span class='plus op'>+</span> <span class='access_token identifier id'>access_token</span><span class='dot token'>.</span><span class='params identifier id'>params</span><span class='lbrack token'>[</span><span class='symbol val'>:oauth_authorization_expires_in</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='to_i identifier id'>to_i</span>
  <span class='@session_handle ivar id'>@session_handle</span> <span class='assign token'>=</span> <span class='access_token identifier id'>access_token</span><span class='dot token'>.</span><span class='params identifier id'>params</span><span class='lbrack token'>[</span><span class='symbol val'>:oauth_session_handle</span><span class='rbrack token'>]</span>
  <span class='@atoken ivar id'>@atoken</span><span class='comma token'>,</span> <span class='@asecret ivar id'>@asecret</span> <span class='assign token'>=</span> <span class='access_token identifier id'>access_token</span><span class='dot token'>.</span><span class='token identifier id'>token</span><span class='comma token'>,</span> <span class='access_token identifier id'>access_token</span><span class='dot token'>.</span><span class='secret identifier id'>secret</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>
    
    <div id="footer">
  Generated on Wed Dec 22 11:40:41 2010 by 
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.6.3 (ruby-1.8.7).
</div>

  </body>
</html>